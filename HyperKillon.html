<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HYPER STORE ‚Äî –ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Orbitron', sans-serif; background:#0e0017; color:#fff; margin:0; }
    header.topbar { background:rgba(0,0,0,0.7); padding:15px; position:sticky; top:0; display:flex; justify-content:space-between; align-items:center; }
    .btn { cursor:pointer; padding:10px 18px; border-radius:20px; border:none; background:linear-gradient(90deg,#7a00ff,#ff00ff); color:#fff; margin:2px; }
    .btn.ghost { background:transparent; border:1px solid #ff00ff; }
    .btn.ok { background:linear-gradient(90deg,#059669,#10b981); }
    .btn.warn { background:linear-gradient(90deg,#b45309,#f59e0b); }
    .wrap { max-width:1100px; margin:0 auto; padding:20px; }
    h2 { margin-top:0; }
    .grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:16px; }
    .card { background:rgba(0,0,0,0.55); padding:16px; border-radius:16px; border:1px solid rgba(255,0,255,0.3); box-shadow:0 0 14px rgba(255,0,255,0.2); }
    .price { font-size:18px; margin-top:8px; }
    section { display:none; }
    section.active { display:block; }
    .category-title { font-size:20px; margin:20px 0 10px; color:#ffd6ff; text-shadow:0 0 8px #ff00ff; }
    input,textarea { width:100%; padding:10px; margin:5px 0; border-radius:12px; border:1px solid rgba(255,255,255,.2); background:rgba(0,0,0,.4); color:#fff; }
    .status { padding:6px 10px; border-radius:8px; display:inline-block; margin-top:8px; }
    .status.pending { background:#f59e0b33; border:1px solid #f59e0b66; }
    .status.confirmed { background:#60a5fa33; border:1px solid #60a5fa66; }
    .status.delivered { background:#10b98133; border:1px solid #10b98166; }
    table { width:100%; border-collapse:collapse; margin-top:10px; }
    th,td { border-bottom:1px solid rgba(255,255,255,0.2); padding:8px; }
  </style>
</head>
<body>
  <header class="topbar">
    <div class="brand">HYPER <span style="color:#ffd6ff">STORE</span></div>
    <div class="actions">
      <button class="btn ghost" onclick="goto('catalog')">–ö–∞—Ç–∞–ª–æ–≥</button>
      <button class="btn ghost" onclick="openAdminLogin()">–ê–¥–º–∏–Ω</button>
    </div>
  </header>

  <main class="wrap">
    <!-- CATALOG -->
    <section id="catalog" class="active">
      <h2>–ö–∞—Ç–∞–ª–æ–≥</h2>
      <div class="category-title">Android</div>
      <div id="androidGrid" class="grid"></div>
      <div class="category-title">iOS</div>
      <div id="iosGrid" class="grid"></div>
    </section>

    <!-- CHECKOUT -->
    <section id="checkout">
      <div class="card">
        <button class="btn ghost" onclick="goto('catalog')">‚Üê –ù–∞–∑–∞–¥</button>
        <h2>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
        <div id="chosenInfo"></div>
        <h3>–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</h3>
        <label><input type="radio" name="paymethod" value="–ö–∞—Ä—Ç–∞" checked> üí≥ –ö–∞—Ä—Ç–∞ (2202208307028754 –ø–æ–ª—É—á–∞—Ç–µ–ª—å –î–∞–Ω–∏–ª –ê–ª–µ–∫—Å–µ–µ–≤–∏—á)</label><br>
        <label><input type="radio" name="paymethod" value="—é–º–∞–Ω–∏"> üì± —é–º–∞–Ω–∏ (5599002099492383)</label><br>
        <label><input type="radio" name="paymethod" value="USDT"> ‚Çø USDT (TRC20: TL9x...3Q9z)</label>
        <textarea id="customerNote" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –æ–ø–ª–∞—Ç–µ..."></textarea>
        <button class="btn" onclick="placeOrder()">–Ø –æ–ø–ª–∞—Ç–∏–ª(–∞)</button>
      </div>
    </section>

    <!-- WAITING -->
    <section id="waiting">
      <div class="card">
        <h2>–û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è</h2>
        <div id="waitingInfo"></div>
        <div id="waitingStatus" class="status pending">pending</div>
      </div>
    </section>

    <!-- DELIVERED -->
    <section id="delivered">
      <div class="card">
        <h2>–î–æ—Å—Ç—É–ø –≤—ã–¥–∞–Ω</h2>
        <div id="delivKey"></div>
        <a id="delivFile" class="btn ok" download>–°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª</a>
      </div>
    </section>

    <!-- ADMIN -->
    <section id="adminPanel">
      <div class="card">
        <h2>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h2>
        <table>
          <thead><tr><th>ID</th><th>–¢–æ–≤–∞—Ä</th><th>–¶–µ–Ω–∞</th><th>–û–ø–ª–∞—Ç–∞</th><th>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</th><th>–°—Ç–∞—Ç—É—Å</th><th>–§–∞–π–ª</th><th>–î–µ–π—Å—Ç–≤–∏—è</th></tr></thead>
          <tbody id="adminTable"></tbody>
        </table>
      </div>
    </section>
  </main>

  <!-- ADMIN LOGIN MODAL -->
  <div id="adminModal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.7);align-items:center;justify-content:center;">
    <div class="card" style="max-width:300px;">
      <h3>–í—Ö–æ–¥ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h3>
      <input id="loginUser" placeholder="admin" />
      <input id="loginPass" type="password" placeholder="demo123" />
      <button class="btn" onclick="performAdminLogin()">–í–æ–π—Ç–∏</button>
      <button class="btn ghost" onclick="closeAdminLogin()">–û—Ç–º–µ–Ω–∞</button>
      <div id="loginMsg"></div>
    </div>
  </div>

  <script>
    const PRODUCTS = [
      { id: 'and1', os:'android', name: '–ü–æ–¥–ø–∏—Å–∫–∞ 1 –¥–µ–Ω—å', price: 200 },
      { id: 'and7', os:'android', name: '–ü–æ–¥–ø–∏—Å–∫–∞ 7 –¥–Ω–µ–π', price: 300 },
      { id: 'and30', os:'android', name: '–ü–æ–¥–ø–∏—Å–∫–∞ 30 –¥–Ω–µ–π', price: 400 },
      { id: 'and365', os:'android', name: '–ü–æ–¥–ø–∏—Å–∫–∞ 365 –¥–Ω–µ–π', price: 700 },
      { id: 'andForever', os:'android', name: '–ü–æ–¥–ø–∏—Å–∫–∞ –≤—Å–µ–≥–¥–∞', price: 800 },
      { id: 'ios1', os:'ios', name: '–ü–æ–¥–ø–∏—Å–∫–∞ 1 –¥–µ–Ω—å', price: 200 },
      { id: 'ios7', os:'ios', name: '–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–µ–¥–µ–ª—è', price: 300 },
      { id: 'ios30', os:'ios', name: '–ü–æ–¥–ø–∏—Å–∫–∞ –º–µ—Å—è—Ü', price: 600 },
      { id: 'ios365', os:'ios', name: '–ü–æ–¥–ø–∏—Å–∫–∞ –≥–æ–¥', price: 1000 },
    ];

    let orders=JSON.parse(localStorage.getItem('orders')||'[]');
    let activeOrderId=null; let chosenProduct=null;

    function saveOrders(){ localStorage.setItem('orders',JSON.stringify(orders)); }

    function renderCatalog(){
      const androidGrid=document.getElementById('androidGrid');
      const iosGrid=document.getElementById('iosGrid');
      androidGrid.innerHTML=PRODUCTS.filter(p=>p.os==='android').map(p=>`<div class="card"><h3>${p.name}</h3><div class="price">${p.price}‚ÇΩ</div><button class="btn" onclick="chooseProduct('${p.id}')">–ö—É–ø–∏—Ç—å</button></div>`).join('');
      iosGrid.innerHTML=PRODUCTS.filter(p=>p.os==='ios').map(p=>`<div class="card"><h3>${p.name}</h3><div class="price">${p.price}‚ÇΩ</div><button class="btn" onclick="chooseProduct('${p.id}')">–ö—É–ø–∏—Ç—å</button></div>`).join('');
    }

    function goto(id){
      document.querySelectorAll('main section').forEach(s=>s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      if(id==='catalog') renderCatalog();
      if(id==='waiting') renderWaiting();
      if(id==='adminPanel') renderAdmin();
      if(id==='delivered'){ renderDelivered(orders.find(o=>o.id===activeOrderId)); }
    }

    function chooseProduct(id){
      chosenProduct=PRODUCTS.find(p=>p.id===id);
      document.getElementById('chosenInfo').innerText=`${chosenProduct.name} ‚Äî ${chosenProduct.price}‚ÇΩ`;
      goto('checkout');
    }

    function placeOrder(){
      const method=document.querySelector('input[name=paymethod]:checked').value;
      const note=document.getElementById('customerNote').value;
      const order={id:Math.random().toString(36).slice(2,8),product:chosenProduct.name,price:chosenProduct.price,method:method,note:note,status:'pending',file:null};
      orders.push(order); saveOrders(); activeOrderId=order.id; goto('waiting');
    }

    function renderWaiting(){
      const o=orders.find(x=>x.id===activeOrderId);
      if(!o) return; document.getElementById('waitingInfo').innerText=`–ó–∞–∫–∞–∑ ${o.id}: ${o.product} ‚Äî ${o.price}‚ÇΩ (–æ–ø–ª–∞—Ç–∞: ${o.method})`;
      document.getElementById('waitingStatus').className='status '+o.status;
      document.getElementById('waitingStatus').innerText=o.status;
    }

    function renderDelivered(o){
      if(!o) return; document.getElementById('delivKey').innerText='KEY-'+o.id.toUpperCase();
      if(o.file){
        document.getElementById('delivFile').href=URL.createObjectURL(o.file);
        document.getElementById('delivFile').download=o.file.name;
      } else {
        const blob=new Blob([`–í–∞—à –∫–ª—é—á: KEY-${o.id.toUpperCase()}`],{type:'text/plain'});
        document.getElementById('delivFile').href=URL.createObjectURL(blob);
        document.getElementById('delivFile').download="key.txt";
      }
    }

    function renderAdmin(){
      document.getElementById('adminTable').innerHTML=orders.map(o=>`
        <tr>
          <td>${o.id}</td>
          <td>${o.product}</td>
          <td>${o.price}‚ÇΩ</td>
          <td>${o.method}</td>
          <td>${o.note}</td>
          <td><span class="status ${o.status}">${o.status}</span></td>
          <td>
            ${o.file ? 
              `${o.file.name} <button class='btn warn' onclick="removeFile('${o.id}')">–£–¥–∞–ª–∏—Ç—å</button>` :
              `<input type='file' onchange="attachFile(event,'${o.id}')">`}
          </td>
          <td>
            ${o.status==='pending'?`<button class='btn ghost' onclick="confirmOrder('${o.id}')">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>`:''}
            <button class='btn ok' onclick="deliverOrder('${o.id}')">–í—ã–¥–∞—Ç—å</button>
          </td>
        </tr>`).join('');
    }

    function attachFile(e,id){
      if(e.target.files.length>0){
        const file=e.target.files[0];
        orders=orders.map(o=>o.id===id?{...o,file:file}:o);
        saveOrders();
        renderAdmin();
        alert('–§–∞–π–ª –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω –∫ –∑–∞–∫–∞–∑—É '+id);
      }
    }

    function removeFile(id){
      orders=orders.map(o=>o.id===id?{...o,file:null}:o);
      saveOrders();
      renderAdmin();
      alert('–§–∞–π–ª —É–¥–∞–ª—ë–Ω —É –∑–∞–∫–∞–∑–∞ '+id);
    }

    function confirmOrder(id){ orders=orders.map(o=>o.id===id?{...o,status:'confirmed'}:o); saveOrders(); renderAdmin(); renderWaiting(); }
    function deliverOrder(id){ orders=orders.map(o=>o.id===id?{...o,status:'delivered'}:o); saveOrders(); renderAdmin(); if(activeOrderId===id) goto('delivered'); }

    function openAdminLogin(){ document.getElementById('adminModal').style.display='flex'; }
    function closeAdminLogin(){ document.getElementById('adminModal').style.display='none'; }
    function performAdminLogin(){ if(document.getElementById('loginUser').value==='admin' && document.getElementById('loginPass').value==='demo123'){ closeAdminLogin(); goto('adminPanel'); } else { document.getElementById('loginMsg').innerText='–ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ'; } }

    renderCatalog();
  </script>
</body>
</html>
